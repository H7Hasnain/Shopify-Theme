<section class="section section--featured-collection">
  <div class="container">
    <div class="section__header">
      {% if section.settings.heading != blank %}
        <h2 class="section__title">{{ section.settings.heading }}</h2>
      {% endif %}
      {% if section.settings.text != blank %}
        <p class="section__subtitle">{{ section.settings.text }}</p>
      {% endif %}
    </div>
    {% if section.settings.collection %}
      {% assign collection = section.settings.collection %}
      {% if collection %}
        <div class="grid grid--{{ section.settings.columns }}">
          {% for product in collection.products limit: section.settings.product_count %}
            {% render 'product-card', product: product %}
          {% endfor %}
        </div>
        {% if section.settings.show_view_all and collection.url %}
          <div style="margin-top:20px; text-align:center;">
            <a class="btn btn--ghost" href="{{ collection.url }}">{{ section.settings.view_all_label }}</a>
          </div>
        {% endif %}
      {% endif %}
    {% else %}
      <p>Select a collection in the section settings.</p>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Featured collection",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Featured products" },
    { "type": "textarea", "id": "text", "label": "Subheading" },
    { "type": "collection", "id": "collection", "label": "Collection" },
    { "type": "range", "id": "product_count", "label": "Products to show", "min": 2, "max": 24, "step": 1, "default": 8 },
    { "type": "range", "id": "columns", "label": "Columns", "min": 2, "max": 4, "step": 1, "default": 4 },
    { "type": "checkbox", "id": "show_view_all", "label": "Show view all button", "default": true },
    { "type": "text", "id": "view_all_label", "label": "View all label", "default": "View all" }
  ],
  "blocks": [],
  "max_blocks": 0
}
{% endschema %}