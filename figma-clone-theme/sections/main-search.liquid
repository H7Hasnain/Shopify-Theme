<section class="section section--search">
  <div class="container">
    <form action="{{ routes.search_url }}" method="get" role="search" style="display:flex; gap:8px; margin-bottom: 16px;">
      <input type="search" name="q" value="{{ search.terms | escape }}" placeholder="Search products, pages..." style="flex:1; padding: 10px 12px; border-radius: var(--radius); border: 1px solid rgba(0,0,0,.15);">
      <button class="btn" type="submit">{{ 'general.search' | t }}</button>
    </form>

    {% if search.performed %}
      <p>{{ search.results_count }} results for “{{ search.terms | escape }}”</p>
      <div class="grid grid--{{ section.settings.columns }}">
        {% for item in search.results %}
          {% if item.object_type == 'product' %}
            {% render 'product-card', product: item %}
          {% else %}
            <a class="card" href="{{ item.url }}">
              <div class="card__body">
                <h3 style="margin:0 0 6px;">{{ item.title }}</h3>
                {% if item.excerpt %}<p style="opacity:.8;">{{ item.excerpt | strip_html | truncate: 120 }}</p>{% endif %}
              </div>
            </a>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Main search",
  "settings": [
    { "type": "range", "id": "columns", "label": "Columns", "min": 2, "max": 4, "step": 1, "default": 4 }
  ]
}
{% endschema %}