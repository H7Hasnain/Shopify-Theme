<section class="section section--features-grid">
  <div class="container">
    {% if section.settings.heading != blank %}
      <h2 class="section__title">{{ section.settings.heading }}</h2>
    {% endif %}
    {% if section.settings.text != blank %}
      <p class="section__subtitle">{{ section.settings.text }}</p>
    {% endif %}
    <div class="grid grid--{{ section.settings.columns }}">
      {% for block in section.blocks %}
        <div class="card" {{ block.shopify_attributes }}>
          <div class="card__body">
            {% if block.settings.image %}
              {{ block.settings.image | image_url: width: 120 | image_tag: alt: block.settings.title, style: 'width:48px; height:48px; object-fit:contain;' }}
            {% endif %}
            {% if block.settings.title %}
              <h3 style="margin:10px 0 6px;">{{ block.settings.title }}</h3>
            {% endif %}
            {% if block.settings.text %}
              <p style="opacity:.8;">{{ block.settings.text }}</p>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Features grid",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Why choose us" },
    { "type": "textarea", "id": "text", "label": "Subheading" },
    { "type": "range", "id": "columns", "label": "Columns", "min": 2, "max": 4, "step": 1, "default": 3 }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Icon" },
        { "type": "text", "id": "title", "label": "Title", "default": "Feature title" },
        { "type": "textarea", "id": "text", "label": "Text", "default": "A short description explaining the benefit." }
      ]
    }
  ],
  "max_blocks": 8
}
{% endschema %}